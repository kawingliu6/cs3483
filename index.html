<!DOCTYPE html>
    <html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <title> - jsFiddle demo</title>

      <script type='text/javascript' src='https://code.jquery.com/jquery-1.9.1.js'></script>




      <script type="text/javascript" src="https://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
      <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">


          <script type='text/javascript' src="https://wolframhempel.github.io/photobooth-js/photobooth_min.js"></script>


      <style type='text/css'>
        #photo {
        height: 300px;
        width: 380px;
    }
    #gallery {
        margin: 5px 0;
        background: #f6f6f6;
    }
      </style>



    <script type='text/javascript'>//<![CDATA[ 
    $(window).load(function(){
    $(document).ready(function () {
        var file = null;
        $('#photo').photobooth().on("image", function (event, dataUrl) {
            file = dataURLtoBlob(dataUrl);
            var size = file.size;
            alert("Picture size: " + size);
            uploadImage(file);
            $("#gallery").append('<img src="' + dataUrl + '" >');
        });
    });

 // (Commented out due to not having this file) 
 //    $(function() {
 //           var coords = $('.photobooth.T').faceDetection();
 //           console.log(coords);    
 //       });


    function dataURLtoBlob(dataUrl) {
        // Decode the dataURL    
        var binary = atob(dataUrl.split(',')[1]);

        // Create 8-bit unsigned array
        var array = [];
        for (var i = 0; i < binary.length; i++) {
            array.push(binary.charCodeAt(i));
        }

        // Return our Blob object
        return new Blob([new Uint8Array(array)], {
            type: 'image/png'
        });
    }

    function uploadImage(file) {
        var fd = new FormData();
        // Append our Canvas image file to the form data
        fd.append("files", file);
        fd.append("album", $("#album").val());
        fd.append("albumkey", $("#albumkey").val());
        // And send it
        $.ajax({
            url: "https://lambda-face-recognition.p.mashape.com/recognize",
            type: "POST",
            data: fd,
            processData: false,
            contentType: false,
            beforeSend: function (xhr) {
                xhr.setRequestHeader("X-Mashape-Authorization", $("#mashapeKey").val());
            }
        }).done(function (result) {
            alert("Received response..");
            var resultObject = JSON.stringify(result);
            alert(resultObject);
        });
    }
    });//]]>  

    </script>


    </head>
    <body>
      <div id="photo"></div>
    <h3>Sample Code for Face Recognition in Javascript (Mashape)</h3>
    <h4>Tutorial link <a target="_blank" href="http://blog.mashape.com/post/45712257463/face-recognition-using-javascript-and-mashape">here</a>.  Look at the top, the app is requesting access to your webcam.</h4>  
    1. Mashape key: 
    <br/>&nbsp;&nbsp;&nbsp;
    <input type="text" id="mashapeKey" value="wEaHZBmxkZsQAcXjyPd8koe1vWzqgkjC" />
    <br/>2. album: 
    <br/>&nbsp;&nbsp;&nbsp;
    <input type="text" id="album" value="apitraveler" />
    <br/>3.albumkey: 
    <br/>&nbsp;&nbsp;&nbsp;
    <input type="text" id="albumkey" value="c2de7705a8dfd6056fe0cfb9e486e55ca62bde9ba41fd5990f0d0d8b87aa193f" />
    <div id="gallery"></div>

    </body>


    </html>